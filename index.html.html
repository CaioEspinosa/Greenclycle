<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GREENCYCLE — Mapa de Reciclagem</title>
  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <style>
    html, body { height: 100%; }
    #map { height: 480px; }
    .leaflet-container { border-radius: 1rem; }
  </style>
</head>
<body class="min-h-screen w-full bg-gradient-to-b from-emerald-50 to-white text-slate-900">
  <!-- HEADER -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/70 border-b">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center gap-4 justify-between">
      <div class="flex items-center gap-2">
        <!-- Logo opcional -->
        <img src="/greencycle-logo.png" alt="GREENCYCLE" class="h-9 w-9 rounded-xl object-contain" onerror="this.style.display='none'">
        <span class="font-extrabold tracking-tight text-xl">GREENCYCLE</span>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a class="hover:text-emerald-700" href="#mapa">Mapa</a>
        <a class="hover:text-emerald-700" href="#features">Recursos</a>
        <a class="hover:text-emerald-700" href="#pricing">Planos</a>
        <a class="hover:text-emerald-700" href="#b2b">Para Empresas</a>
        <a class="hover:text-emerald-700" href="#contato">Contato</a>
      </nav>
      <div class="flex items-center gap-2">
        <button id="btnAbrirMapa" class="px-4 py-2 rounded bg-emerald-600 text-white">Abrir Mapa</button>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4">
    <!-- HERO -->
    <section class="grid md:grid-cols-2 gap-8 py-12 items-center">
      <div>
        <h1 class="text-4xl md:text-5xl font-extrabold leading-tight tracking-tight">
          Reciclar ficou simples: <span class="text-emerald-700">mapa interativo</span>, <span class="text-emerald-700">cashback</span> e impacto real
        </h1>
        <p class="mt-4 text-slate-600 text-lg">
          Encontre pontos de coleta próximos, filtre por material aceito e gere comprovantes para somar no seu ranking sustentável.
        </p>
        <div class="mt-6 flex gap-3">
          <button id="btnVerMapa" class="px-4 py-2 rounded bg-emerald-600 text-white">Ver mapa</button>
          <a href="#pricing" class="px-4 py-2 rounded border flex items-center gap-2"><span>📈</span>Ver planos</a>
        </div>
        <div class="mt-6 flex items-center gap-6 text-sm text-slate-600">
          <span>⚡ Energia renovável nas sedes</span>
          <span>🔒 LGPD by design</span>
          <span>🏆 Ranking sustentável</span>
        </div>
      </div>
      <div class="p-6 border rounded-2xl bg-white shadow-xl">
        <h3 class="font-semibold text-lg">Como funciona</h3>
        <div class="grid gap-4 mt-3 text-sm text-slate-700">
          <div class="flex items-start gap-3">
            <div class="h-9 w-9 rounded-xl bg-emerald-600 text-white grid place-content-center">📍</div>
            <div><div class="font-semibold">Encontre pontos de coleta</div><div>Veja locais próximos e o que cada um aceita.</div></div>
          </div>
          <div class="flex items-start gap-3">
            <div class="h-9 w-9 rounded-xl bg-emerald-600 text-white grid place-content-center">♻️</div>
            <div><div class="font-semibold">Entregue corretamente</div><div>Tutoriais, foto/QR e confirmação (em breve).</div></div>
          </div>
          <div class="flex items-start gap-3">
            <div class="h-9 w-9 rounded-xl bg-emerald-600 text-white grid place-content-center">🏆</div>
            <div><div class="font-semibold">Ganhe cashback</div><div>Pontue e troque por descontos (parceiros).</div></div>
          </div>
        </div>
      </div>
    </section>

    <!-- MAPA INTERATIVO -->
    <section id="mapa" class="py-12">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-3xl font-bold flex items-center gap-2">📍 Mapa de pontos</h2>
        <div class="flex gap-2">
          <button id="btnLocate" class="px-3 py-2 rounded border flex items-center gap-2">📌 Usar minha localização</button>
        </div>
      </div>

      <div class="grid md:grid-cols-4 gap-6">
        <!-- Filtros -->
        <div class="md:col-span-1 h-fit p-4 border rounded-2xl bg-white">
          <div class="mb-3">
            <label class="text-sm text-slate-600">Buscar por nome</label>
            <input id="q" placeholder="Ex.: Ipiranga" class="mt-1 w-full border rounded px-3 py-2" />
          </div>
          <div class="text-sm text-slate-600 mb-2">Materiais</div>
          <div id="materials" class="grid grid-cols-2 gap-2 text-sm"></div>
          <div class="mt-3 flex gap-2">
            <button id="btnClear" class="px-3 py-2 rounded border">Limpar</button>
          </div>
        </div>

        <!-- Mapa + lista -->
        <div class="md:col-span-3 space-y-4">
          <div class="h-[480px] w-full overflow-hidden rounded-2xl border">
            <div id="map" class="h-full w-full"></div>
          </div>

          <div class="border rounded-2xl bg-white">
            <div class="px-4 py-3 border-b">
              <h3 id="count" class="text-base font-semibold">0 ponto(s) encontrados</h3>
            </div>
            <div class="p-4">
              <ul id="list" class="grid md:grid-cols-2 gap-2"></ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- RECURSOS -->
    <section id="features" class="py-12">
      <h2 class="text-3xl font-bold">Recursos principais</h2>
      <div class="mt-6 grid md:grid-cols-3 gap-6">
        <div class="p-4 border rounded-2xl bg-white">
          <div class="text-base font-semibold">🗺️ Mapa inteligente</div>
          <div class="text-sm text-slate-600 mt-1">Filtre por material, horário e avaliação dos pontos.</div>
        </div>
        <div class="p-4 border rounded-2xl bg-white">
          <div class="text-base font-semibold">📊 Impacto em CO₂e (em breve)</div>
          <div class="text-sm text-slate-600 mt-1">Veja CO₂e evitado e metas mensais por material.</div>
        </div>
        <div class="p-4 border rounded-2xl bg-white">
          <div class="text-base font-semibold">🏆 Cashback + Ranking (em breve)</div>
          <div class="text-sm text-slate-600 mt-1">Recompensas progressivas e desafios mensais.</div>
        </div>
        <div class="p-4 border rounded-2xl bg-white">
          <div class="text-base font-semibold">🤝 Parcerias</div>
          <div class="text-sm text-slate-600 mt-1">Descontos em mercados/delivery/fornecedores parceiros.</div>
        </div>
        <div class="p-4 border rounded-2xl bg-white">
          <div class="text-base font-semibold">🏢 Portal B2B</div>
          <div class="text-sm text-slate-600 mt-1">Relatórios e certificações ESG/logística reversa.</div>
        </div>
        <div class="p-4 border rounded-2xl bg-white">
          <div class="text-base font-semibold">🔒 Privacidade</div>
          <div class="text-sm text-slate-600 mt-1">Consentimento granular e transparência sobre dados.</div>
        </div>
      </div>
    </section>

    <!-- PLANOS -->
    <section id="pricing" class="py-12">
      <h2 class="text-3xl font-bold">Planos e preços</h2>
      <div class="mt-6 grid md:grid-cols-3 gap-6">
        <div class="p-4 border rounded-2xl bg-white">
          <div class="font-semibold flex items-center justify-between">
            <span>Gratuito</span>
          </div>
          <div class="text-slate-600">R$ 0</div>
          <ul class="space-y-2 text-sm mt-2">
            <li class="flex gap-2 items-start">✅ Mapa e filtros básicos</li>
            <li class="flex gap-2 items-start">✅ Comprovante de entrega (em breve)</li>
            <li class="flex gap-2 items-start">✅ Cashback padrão (em breve)</li>
          </ul>
          <div class="mt-3"><a href="#mapa" class="w-full inline-block text-center px-4 py-2 rounded bg-emerald-600 text-white">Começar</a></div>
        </div>
        <div class="p-4 border-emerald-600 border-2 rounded-2xl bg-white shadow-lg">
          <div class="font-semibold flex items-center justify-between">
            <span>Premium</span> <span class="text-xs px-2 py-1 rounded bg-emerald-100 text-emerald-800">Recomendado</span>
          </div>
          <div class="text-slate-600">R$ 9,90/mês</div>
          <ul class="space-y-2 text-sm mt-2">
            <li class="flex gap-2 items-start">✅ Relatórios personalizados (em breve)</li>
            <li class="flex gap-2 items-start">✅ Cashback aumentado (em breve)</li>
            <li class="flex gap-2 items-start">✅ Ranking sustentável premium (em breve)</li>
          </ul>
          <div class="mt-3"><a href="#mapa" class="w-full inline-block text-center px-4 py-2 rounded bg-emerald-600 text-white">Assinar</a></div>
        </div>
        <div class="p-4 border rounded-2xl bg-white">
          <div class="font-semibold">Empresas (B2B)</div>
          <div class="text-slate-600">a partir de R$ 199,90/mês</div>
          <ul class="space-y-2 text-sm mt-2">
            <li class="flex gap-2 items-start">✅ Relatórios de logística reversa</li>
            <li class="flex gap-2 items-start">✅ Certificações e auditoria</li>
            <li class="flex gap-2 items-start">✅ Portal de colaboradores</li>
          </ul>
          <div class="mt-3"><a href="#b2b" class="w-full inline-block text-center px-4 py-2 rounded bg-emerald-600 text-white">Falar com vendas</a></div>
        </div>
      </div>
    </section>

    <!-- B2B -->
    <section id="b2b" class="py-12">
      <h2 class="text-3xl font-bold">Portal B2B – Demonstração</h2>
      <div class="mt-6 grid md:grid-cols-2 gap-6">
        <div class="p-4 border rounded-2xl bg-white">
          <div class="font-semibold text-lg">Benefícios ESG práticos</div>
          <div class="text-slate-700 space-y-2 text-sm mt-2">
            <div class="flex gap-2 items-start">✅ Relatórios mensais de materiais por unidade</div>
            <div class="flex gap-2 items-start">✅ Integração via API/CSV</div>
            <div class="flex gap-2 items-start">✅ Campanhas internas + ranking por time</div>
            <div class="flex gap-2 items-start">✅ Certificação de boas práticas</div>
          </div>
          <div class="mt-4">
            <a href="#b2b-form" class="px-4 py-2 rounded bg-emerald-600 text-white inline-block">Solicitar demo</a>
          </div>
        </div>

        <div id="b2b-form" class="p-4 border rounded-2xl bg-white">
          <div class="font-semibold text-lg">Solicite uma demonstração</div>
          <div class="text-sm text-slate-600">Retornamos em até 1 dia útil</div>
          <div class="space-y-3 mt-3">
            <input placeholder="Nome" class="w-full border rounded px-3 py-2" />
            <input placeholder="Empresa" class="w-full border rounded px-3 py-2" />
            <input placeholder="E-mail corporativo" class="w-full border rounded px-3 py-2" />
            <textarea placeholder="Conte em 2 linhas o que você precisa" class="w-full border rounded px-3 py-2"></textarea>
          </div>
          <div class="mt-3">
            <button class="w-full px-4 py-2 rounded bg-emerald-600 text-white">🏢 Falar com vendas</button>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTATO -->
    <section id="contato" class="py-12">
      <h2 class="text-3xl font-bold">Fale com a gente</h2>
      <p class="text-slate-600 mt-2">Dúvidas, parcerias ou mídia? Nos envie uma mensagem. 📩</p>
      <div class="mt-6 grid md:grid-cols-2 gap-6">
        <div class="p-4 border rounded-2xl bg-white">
          <div class="font-semibold text-lg">Envie uma mensagem</div>
          <div class="text-sm text-slate-600">Respondemos em até 1 dia útil</div>
          <div class="space-y-3 mt-3">
            <input placeholder="Seu nome" class="w-full border rounded px-3 py-2" />
            <input placeholder="Seu e-mail" class="w-full border rounded px-3 py-2" />
            <textarea placeholder="Como podemos ajudar?" class="w-full border rounded px-3 py-2"></textarea>
          </div>
          <div class="mt-3">
            <button class="w-full px-4 py-2 rounded bg-emerald-600 text-white">Enviar</button>
          </div>
        </div>

        <div class="p-4 border rounded-2xl bg-white text-sm text-slate-700 space-y-2">
          <div>📧 E-mail: <a class="text-emerald-700 underline" href="mailto:contato@greencycle.com">contato@greencycle.com</a></div>
          <div>💬 WhatsApp: <a class="text-emerald-700 underline" href="#">(11) 99999-9999</a></div>
          <div>📍 São Paulo — SP</div>
          <div>⏰ Seg–Sex, 9h–18h</div>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER + LGPD -->
  <footer class="mt-16 border-t">
    <div class="mx-auto max-w-6xl px-4 py-8 text-sm text-slate-600 flex flex-col md:flex-row items-center justify-between gap-3">
      <span>© <span id="year"></span> GREENCYCLE. Todos os direitos reservados.</span>
      <div class="flex items-center gap-4">
        <a class="hover:text-emerald-700" href="#">Política de Privacidade</a>
        <a class="hover:text-emerald-700" href="#">Termos</a>
      </div>
    </div>

    <div class="mx-auto max-w-6xl px-4 pb-10">
      <div class="p-4 rounded-2xl bg-emerald-50 border border-emerald-200">
        <div class="font-semibold text-base">Privacidade</div>
        <div class="text-sm text-slate-600">Consentimento (LGPD)</div>
        <div class="space-y-4 mt-3">
          <label class="flex items-center justify-between">
            <div>
              <div class="font-medium">Aceito a Política de Privacidade</div>
              <div class="text-xs text-slate-600">Consentimento granular e revogável</div>
            </div>
            <input type="checkbox" id="lgpdAccepted" class="h-4 w-4">
          </label>
          <label class="flex items-center justify-between">
            <div>
              <div class="font-medium">Receber ofertas e desafios por e-mail</div>
              <div class="text-xs text-slate-600">Opt-in marketing</div>
            </div>
            <input type="checkbox" id="optin" class="h-4 w-4">
          </label>
          <div class="grid md:grid-cols-2 gap-2">
            <input placeholder="Seu e-mail" class="w-full border rounded px-3 py-2" />
            <button id="savePrefs" class="px-4 py-2 rounded bg-emerald-600 text-white disabled:opacity-50" disabled>Salvar</button>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const ALL_MATERIALS = ["PET","Alumínio","Papelão","Vidro","Plástico","Eletrodomésticos"];
    const MOCK_POINTS = [
      { id: 1,  name: "Ecoponto Ipiranga",     lat: -23.593, lng: -46.606, materials: ["Papelão","Plástico","Vidro"], rating: 4.6, hours: "08:00–18:00" },
      { id: 2,  name: "Coop Recicla Mooca",    lat: -23.563, lng: -46.591, materials: ["Alumínio","PET"],             rating: 4.4, hours: "09:00–17:00" },
      { id: 3,  name: "Ponto Verde – Cambuci", lat: -23.565, lng: -46.624, materials: ["Plástico","Eletrodomésticos"], rating: 4.1, hours: "10:00–19:00" },
      { id: 4,  name: "Cooperativa Liberdade", lat: -23.561, lng: -46.639, materials: ["Papelão","Alumínio"],         rating: 4.3, hours: "08:00–18:00" },
      { id: 5,  name: "Ecoponto Aclimação",    lat: -23.575, lng: -46.621, materials: ["Vidro","PET","Plástico"],     rating: 4.5, hours: "07:00–17:00" },
      { id: 6,  name: "Ponto Vila Mariana",    lat: -23.589, lng: -46.634, materials: ["Papelão","Plástico"],         rating: 4.2, hours: "08:00–18:00" },
      { id: 7,  name: "Coleta Bela Vista",     lat: -23.556, lng: -46.646, materials: ["Papelão","PET"],              rating: 4.3, hours: "09:00–17:00" },
      { id: 8,  name: "Eco Pinheiros",         lat: -23.561, lng: -46.699, materials: ["Papelão","PET"],              rating: 4.4, hours: "08:00–18:00" },
      { id: 9,  name: "Recicla Consolação",    lat: -23.556, lng: -46.661, materials: ["Plástico","Eletrodomésticos"], rating: 4.0, hours: "10:00–19:00" },
      { id: 10, name: "Eco Itaim Bibi",        lat: -23.580, lng: -46.674, materials: ["Papelão","PET"],              rating: 4.5, hours: "08:00–18:00" }
    ];

    // ano no rodapé
    document.getElementById('year').textContent = new Date().getFullYear();

    // LGPD save enable
    const lgpdAccepted = document.getElementById('lgpdAccepted');
    const savePrefs = document.getElementById('savePrefs');
    lgpdAccepted.addEventListener('change', () => {
      savePrefs.disabled = !lgpdAccepted.checked;
    });

    // Navegação
    document.getElementById('btnVerMapa').onclick   = () => document.getElementById('mapa').scrollIntoView({behavior:'smooth'});
    document.getElementById('btnAbrirMapa').onclick = () => document.getElementById('mapa').scrollIntoView({behavior:'smooth'});

    // Mapa
    const map = L.map('map').setView([-23.5505, -46.6333], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; OpenStreetMap contributors' }).addTo(map);
    const markersLayer = L.layerGroup().addTo(map);

    // Filtros
    const qEl = document.getElementById('q');
    const matsEl = document.getElementById('materials');
    const listEl = document.getElementById('list');
    const countEl = document.getElementById('count');

    const selected = new Set();
    ALL_MATERIALS.forEach(m => {
      const b = document.createElement('button');
      b.className = 'text-sm px-3 py-2 rounded-xl border bg-white hover:bg-emerald-50';
      b.textContent = m;
      b.onclick = () => {
        if (selected.has(m)) { selected.delete(m); b.classList.remove('bg-emerald-600','text-white','border-emerald-600'); }
        else { selected.add(m); b.classList.add('bg-emerald-600','text-white','border-emerald-600'); }
        render();
      };
      matsEl.appendChild(b);
    });

    document.getElementById('btnClear').onclick = () => { selected.clear(); qEl.value=''; render(); };

    document.getElementById('btnLocate').onclick = () => {
      if (!navigator.geolocation) return;
      navigator.geolocation.getCurrentPosition(pos => {
        map.setView([pos.coords.latitude, pos.coords.longitude], 14);
      });
    };

    function filterPoints() {
      const q = qEl.value.trim().toLowerCase();
      return MOCK_POINTS.filter(p => {
        const matchesQuery = q ? p.name.toLowerCase().includes(q) : true;
        const mats = Array.from(selected);
        const matchesMaterials = mats.length ? mats.every(m => p.materials.includes(m)) : true; // AND
        return matchesQuery && matchesMaterials;
      });
    }

    function render() {
      const pts = filterPoints();
      // markers
      markersLayer.clearLayers();
      pts.forEach(p => {
        const m = L.marker([p.lat,p.lng]).addTo(markersLayer);
        m.bindPopup(`<div class="text-sm">
            <div class="font-semibold">${p.name}</div>
            <div class="text-xs text-slate-600">${p.materials.join(', ')} • ⭐ ${p.rating}</div>
            <div class="text-xs text-slate-600">Horário: ${p.hours}</div>
            <div class="mt-2"><a target="_blank" rel="noreferrer" href="https://www.google.com/maps/dir/?api=1&destination=${p.lat},${p.lng}">Traçar rota</a></div>
          </div>`);
      });

      // list
      listEl.innerHTML = '';
      pts.forEach(p => {
        const li = document.createElement('li');
        li.className = 'p-3 rounded-xl border flex items-center justify-between';
        li.innerHTML = `<div><div class="font-semibold">${p.name}</div><div class="text-xs text-slate-500">${p.materials.join(', ')} • ⭐ ${p.rating}</div></div>
                        <a class="px-3 py-1 rounded border" target="_blank" rel="noreferrer" href="https://www.google.com/maps/dir/?api=1&destination=${p.lat},${p.lng}">Rota</a>`;
        listEl.appendChild(li);
      });
      countEl.textContent = `${pts.length} ponto(s) encontrados`;
    }

    render();
  </script>
</body>
</html>
